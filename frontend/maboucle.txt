function letter(inputLetter){
    let inputIds = ["name", "firstname","city"]
    let inputTexts = ["nom", "prénom","ville",]


    let inputRegExp = new RegExp(`^[a-zA_Z]+$`,'g') 
    let input = inputRegExp.test(inputLetter.value)
    let small = document.getElementsByClassName(`small-letter`)
    console.log(small)

    for (let i=0; i < inputIds.length; i = i + 1){
        if  (inputIds[i] === "name" || 
        inputIds[i] === "firstname" || 
        inputIds[i] === "city") {
             if (input){
                small.innerHTML = inputTexts[i] + ` valide`
            }else {
                small.innerHTML = `Merci d'écrire votre `+ inputTexts[i] +` en toutes lettres`
            }
    }
}
}

// envoie des données collectées à l'api
function sendApi(){
    // je créer un tableau dans lequel je vais push mes produits
    let products = []
    // j'envoie les produit dans mon tableau
    let cartItems = localStorage.getItem('productsInCart')
    cartItems = JSON.parse(cartItems)
    for (let i =0; i < cartItems.length; i++ ){
        products.push(cartItems[i].id)
    }
    console.log(products)
// recuperations des input que je met dans un objet contact
    let name = document.getElementById("name").value
    let firstName = document.getElementById("firstname").value
    let adress = document.getElementById("adress").value
    let city = document.getElementById("city").value
    let email = document.getElementById("email").value

    let contact ={
        firstName: name,
        lastName: firstName,
        adress: adress,
        city: city,
        email: email,
    }

    let object = {
        contact,
        products,
    }

    console.log(object)


    let postApiUrl = `http://localhost:3000/api/teddies/order`
    let postDataApi = JSON.stringify(object)

    let postDataCart = async function(){
        try{
            let response = await fetch(postApiUrl,{
                method : "POST",
                headers : {
                    "content-type": "application/json"
                },
                body : postDataApi
            })
        console.log(response)
// récupération des données de l'api
        if (response.ok){
            let data = await response.json()
    console.log("infos recup :")
    console.log(data)

    let idPostApi = data["orderId"]
    console.log(idPostApi)

    let productsPostApi = products
    console.log(productsPostApi)

// renvoi sur la page de confirmation
    window.location =`confirmation.html?id=${data["orderId"]}&price=${productsPostApi}`
        }else{
            console.error("serveur hs :", response.status)
        }
        }catch(e){
            console.log(e)
        }
    postDataCart()
}
}
